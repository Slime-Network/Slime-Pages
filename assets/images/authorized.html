<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf8">
    <link rel="icon" type="image/svg+xml" href="/vite.svg"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Authorized</title>
  </head>
  <body style="display: flex; justify-content: center; align-items: center; height: 100vh; text-align: center;">
    

    <div id="app" style="border: 1px solid #ccc; border-radius: 8px; padding: 20px; background-color: #f9f9f9; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); max-width: 400px; margin: auto;">
      <div id="message" style="font-size: 32px; color: #333; text-align: center;"></div>
      <div id="instruction"></div>
      <input type="text" id="tokenInput" value="" readonly style=" padding: 10px; font-size: 16px; color: #666; background-color: #e9ecef; border: 1px solid #ccc; border-radius: 4px; margin-bottom: 10px;">
      <button id="copyButton" style="padding: 10px 15px; font-size: 16px; color: #fff; background-color: #154c1a; border: none; border-radius: 4px; cursor: pointer;">Copy to Clipboard</button>
      <script>
        const token = window.location.hash.slice(1).split('&').find(param => param.startsWith('access_token='))?.split('=')[1];
        if (token) {
          document.getElementById('message').innerText = "Authorization Successful!!!";
          document.getElementById('instruction').innerText = "Paste the below token into the extension to enable it all features!";
          document.getElementById('tokenInput').value = token;
          document.getElementById('copyButton').addEventListener('click', () => {
          console.log("Copying token to clipboard:", document.getElementById('tokenInput').value);
          navigator.clipboard.writeText(document.getElementById('tokenInput').value)
            .then(() => {
              alert('Token copied to clipboard!');
            })
            .catch(err => {
              console.error('Failed to copy: ', err);
            });
          });
        }
        else {
          document.getElementById('message').innerText = "Authorization Failed: No token found.";
          document.getElementById('instruction').innerText = "Please close this page, and try authorizing again.";
          document.getElementById('tokenInput').style.display = 'none';
          document.getElementById('copyButton').style.display = 'none';
        }
        
      </script>

    </div>
  </body>
</html>